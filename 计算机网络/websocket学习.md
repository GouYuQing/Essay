# Websocket使用

## 1.WebSocket是什么？

WebSocket 是一种在单个TCP连接上进行全双工通信的协议。WebSocket 使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据，可以双方双向的平等对话，属于服务器的推送技术的一种

## 2.为什么要用WebSocket?

在HTTP协议中，我们可以通过客户端发起通信，但是服务器不能给客户端推送信息

单向的请求无法感知服务器的变化，如果服务器连续变化，我们只能进行**轮询**，隔一段时间发起请求，效率低且浪费资源

### （1）http短轮询

浏览器向服务器请求，看有没有数据更新，每隔一段时间请求一次，无论更没更新都响应

![image-20211214165606395](image/image-20211214165606395.png)



### （2）http长轮询

页面发起一个到服务器的请求，如果服务端数据更新就返回，如果没有更新，到达时间限制就返回，客户端处理完返回信息之后再次发起请求

![image-20211214170310323](image/image-20211214170310323.png)

**轮询的优势：所有浏览器都支持，使用XHR对象和setTimeout()就能实现。**

### （3）websocket

## 6.参考资料

1.[WebSocket 原理及单例组件封装](https://juejin.cn/post/7020344512903905316)

2.[前端webSocket实现聊天消息&心跳检测&断线重连](https://juejin.cn/post/6914113426436390926)

3.[阮一峰websocket教程](https://www.ruanyifeng.com/blog/2017/05/websocket.html)

